<div class="register-container">
  <!-- Componente Toast do PrimeNG para exibir mensagens -->
  <p-toast></p-toast>
  <form (ngSubmit)="onSubmit()" #registerForm="ngForm" class="register-form">
    <h2 class="mb-3 fw-bold display-6">Criar conta</h2>
    <p class="text-muted mb-4">Por favor, introduza os seus dados</p>
    
    <!-- Nome e Email -->
    <div class="row mb-5">
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-user"></i></span>
          <input
            type="text"
            class="form-control"
            id="nome"
            placeholder="Nome completo"
            [(ngModel)]="user.nome"
            name="nome"
            #nome="ngModel"
            required
          />
        </div>
        <div *ngIf="registerForm.submitted && nome.errors?.['required']" class="text-danger small">
          O nome completo é obrigatório.
        </div>
      </div>
      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-envelope"></i></span>
          <input
            type="email"
            class="form-control"
            id="email"
            placeholder="Email"
            [(ngModel)]="user.email"
            name="email"
            #email="ngModel"
            required
            email
          />
        </div>
        <div *ngIf="registerForm.submitted && email.errors?.['required']" class="text-danger small">
          O email é obrigatório.
        </div>
        <div *ngIf="registerForm.submitted && email.errors?.['email']" class="text-danger small">
          O email deve ser válido.
        </div>
      </div>
    </div>

    <!-- Número e Telemóvel -->
    <div class="row mb-5">
      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-phone"></i></span>
          <input
            type="text"
            class="form-control"
            id="telemovel"
            placeholder="Número de telefone"
            [(ngModel)]="user.telemovel"
            name="telemovel"
            #telemovel="ngModel"
            required
            pattern="\+2449[0-9]{8}"
          />
        </div>
        <div *ngIf="registerForm.submitted && telemovel.errors?.['required']" class="text-danger small">
          O número de telefone é obrigatório.
        </div>
        <div *ngIf="registerForm.submitted && telemovel.errors?.['pattern']" class="text-danger small">
          O número deve começar com +244 seguido de 9 dígitos numéricos.
        </div>
      </div>
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-calendar"></i></span>
          <input
            type="date"
            class="form-control"
            id="dataNascimento"
            [(ngModel)]="user.dataNascimento"
            name="dataNascimento"
            #dataNascimento="ngModel"
            required
          />
        </div>
        <div *ngIf="registerForm.submitted && dataNascimento.errors?.['required']" class="text-danger small">
          A data de nascimento é obrigatória.
        </div>
      </div>
    </div>

    <!-- Gênero e morada -->
    <div class="row mb-5">
      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-venus-mars"></i></span>
          <select
            class="form-control"
            id="genero"
            [(ngModel)]="user.genero"
            name="genero"
            #genero="ngModel"
            required
          >
            <option value="" disabled selected>Selecione o gênero</option>
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
            <option value="Outro">Outro</option>
          </select>
        </div>
        <div *ngIf="registerForm.submitted && genero.errors?.['required']" class="text-danger small">
          O gênero é obrigatório.
        </div>
      </div>
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-map-marker"></i></span>
          <input
            type="text"
            class="form-control"
            id="morada"
            placeholder="Morada"
            [(ngModel)]="user.morada"
            name="morada"
            #morada="ngModel"
            required
          />
        </div>
        <div *ngIf="registerForm.submitted && morada.errors?.['required']" class="text-danger small">
          A morada é obrigatória.
        </div>
      </div>
    </div>

    <!-- Senha e Confirmar Senha -->
    <div class="row mb-5">
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-lock"></i></span>
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            id="senha"
            placeholder="Senha"
            [(ngModel)]="user.senha"
            name="senha"
            #senha="ngModel"
            required
            minlength="6"
          />
          <span class="input-group-text toggle-password" (click)="togglePassword()">
            <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'" id="toggleIcon"></i>
          </span>
        </div>
        <div *ngIf="registerForm.submitted && senha.errors?.['required']" class="text-danger small">
          A senha é obrigatória.
        </div>
        <div *ngIf="registerForm.submitted && senha.errors?.['minlength']" class="text-danger small">
          A senha deve ter pelo menos 6 caracteres.
        </div>
      </div>
      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-lock"></i></span>
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            class="form-control"
            id="confirmarSenha"
            placeholder="Confirmar Senha"
            [(ngModel)]="confirmarSenha"
            name="confirmarSenha"
            #confirmarSenhaInput="ngModel"
            required
          />
          <span class="input-group-text toggle-password" (click)="toggleConfirmPassword()">
            <i class="fa" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'" id="toggleConfirmIcon"></i>
          </span>
        </div>
        <div *ngIf="registerForm.submitted && confirmarSenhaInput.errors?.['required']" class="text-danger small">
          A confirmação de senha é obrigatória.
        </div>
        <div *ngIf="registerForm.submitted && user.senha !== confirmarSenha" class="text-danger small">
          As senhas não coincidem.
        </div>
      </div>
    </div>

    <!--Fotografia -->
    <div class="row mb-5">
      <div class="col-md-12">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-camera"></i></span>
          <input
            type="file"
            class="form-control"
            id="fotografia"
            (change)="onFileChange($event)"
            name="fotografia"
          />
        </div>
      </div>
    </div>

    <!-- Botão Registrar -->
    <div class="d-grid mb-3">
      <button
        type="submit"
        class="btn btn-dark text-white">
        <i class="fa fa-user-plus"></i> Criar conta
      </button>
    </div>

    <!-- Link Fazer Login -->
    <div class="text-center mb-3">
      <span>Já tem conta?</span>
      <a [routerLink]="['/login']" class="text-primary text-decoration-none">Fazer login</a>
    </div>
  </form>
</div>