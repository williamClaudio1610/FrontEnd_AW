<div class="register-container">
  <h2 class="text-center">Criar Conta</h2>
  <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
    <!-- Campo Username -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-user"></i></span>
        <input type="text" class="form-control" id="username" placeholder="Username" [(ngModel)]="user.username" name="username" required>
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['username']?.errors?.['required']" class="text-danger small">
        O nome de usuário é obrigatório.
      </div>
    </div>

    <!-- Campo Email -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-envelope"></i></span>
        <input type="email" class="form-control" id="email" placeholder="Email" [(ngModel)]="user.email" name="email" required email>
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['email']?.errors?.['required']" class="text-danger small">
        O email é obrigatório.
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['email']?.errors?.['email']" class="text-danger small">
        O email deve ser válido.
      </div>
    </div>

    <!-- Campo Password -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-lock"></i></span>
        <input [type]="showPassword ? 'text' : 'password'" class="form-control" id="password" placeholder="Password" [(ngModel)]="user.password" name="password" required minlength="6">
        <span class="input-group-text toggle-password" (click)="togglePassword()">
          <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'" id="toggleIcon"></i>
        </span>
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['password']?.errors?.['required']" class="text-danger small">
        A senha é obrigatória.
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['password']?.errors?.['minlength']" class="text-danger small">
        A senha deve ter pelo menos 6 caracteres.
      </div>
    </div>

    <!-- Campo Confirmar Password -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-lock"></i></span>
        <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" id="confirmPassword" placeholder="Confirmar Password" [(ngModel)]="user.confirmPassword" name="confirmPassword" required>
        <span class="input-group-text toggle-password" (click)="toggleConfirmPassword()">
          <i class="fa" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'" id="toggleConfirmIcon"></i>
        </span>
      </div>
      <div *ngIf="registerForm.submitted && user.password !== user.confirmPassword" class="text-danger small">
        As senhas não coincidem.
      </div>
    </div>

    <!-- Campo Número de Telefone -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-phone"></i></span>
        <input type="text" class="form-control" id="phoneNumber" placeholder="+244 9XX XXX XXX" [(ngModel)]="user.phoneNumber" name="phoneNumber" required pattern="\+2449[0-9]{8}">
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['phoneNumber']?.errors?.['required']" class="text-danger small">
        O número de telefone é obrigatório.
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['phoneNumber']?.errors?.['pattern']" class="text-danger small">
        O número deve começar com +244 seguido de 9 dígitos numéricos.
      </div>
    </div>

    <!-- Campo Província -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-map-marker"></i></span>
        <select class="form-control" id="province" [(ngModel)]="user.province" name="province" required>
          <option value="" disabled selected>Selecione a província</option>
          <option *ngFor="let province of provinces" [value]="province">{{ province }}</option>
        </select>
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['province']?.errors?.['required']" class="text-danger small">
        A província é obrigatória.
      </div>
    </div>

    <!-- Campo Perfil -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text"><i class="fa fa-user-tag"></i></span>
        <select class="form-control" id="perfil" [(ngModel)]="user.perfil" name="perfil" required>
          <option value="" disabled selected>Selecione o perfil</option>
          <option value="UtenteRegistado">Utente Registado</option>
          <option value="Administrativo">Administrativo</option>
          <option value="Administrador">Administrador</option>
        </select>
      </div>
      <div *ngIf="registerForm.submitted && registerForm.controls['perfil']?.errors?.['required']" class="text-danger small">
        O perfil é obrigatório.
      </div>
    </div>

    <!-- Botão Registrar -->
    <div class="d-grid mb-3">
      <button type="submit" class="btn btn-login text-white" [disabled]="!registerForm.valid || user.password !== user.confirmPassword">
        <i class="fa fa-user-plus"></i> Criar conta
      </button>
    </div>

    <!-- Link Fazer Login -->
    <div class="text-center">
      <span>Já tem conta?</span>
      <a [routerLink]="['/login']" class="text-link">Fazer login</a>
    </div>

    <!-- Seção Se Conectar Com -->
    <div class="social-login d-flex justify-content-center gap-3">
      <a href="#" class="btn btn-social btn-google">
        <i class="fa fa-google"></i>
      </a>
      <a href="#" class="btn btn-social btn-facebook">
        <i class="fa fa-facebook"></i>
      </a>
      <a href="#" class="btn btn-social btn-twitter">
        <i class="fa fa-twitter"></i>
      </a>
      <a href="#" class="btn btn-social btn-github">
        <i class="fa fa-github"></i>
      </a>
    </div>
  </form>

  <!-- Mensagens de Sucesso e Erro -->
  <div *ngIf="mensagemSucesso" class="alert alert-success mt-3">
    {{ mensagemSucesso }}
  </div>
  <div *ngIf="mensagemErro" class="alert alert-danger mt-3">
    {{ mensagemErro }}
  </div>
</div>